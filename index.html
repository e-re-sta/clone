<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clone Game Hub</title>
<style>
  :root {
    --bg-color-light: #f0f0f0;
    --bg-color-dark: #121212;
    --text-color-light: #000;
    --text-color-dark: #fff;
    --button-bg: #007bff;
    --button-hover: #0056b3;
  }
  body { margin:0; font-family:Arial,sans-serif; background-color:var(--bg-color-light); color:var(--text-color-light); transition:0.3s; }
  body.dark { background-color:var(--bg-color-dark); color:var(--text-color-dark); }
  header { padding:1rem; background-color:#333; color:#fff; text-align:center; cursor:pointer; }
  #main { padding:1rem; }
  .games-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:1rem; margin-bottom:1rem; }
  button { padding:1rem; background-color:var(--button-bg); border:none; color:#fff; cursor:pointer; transition:0.2s; }
  button:hover { background-color:var(--button-hover); }
  #nav-buttons { display:flex; justify-content:space-between; margin-top:1rem; }
  #dark-toggle { position:fixed; top:1rem; right:1rem; padding:0.5rem 1rem; cursor:pointer; background-color:#555; color:#fff; border:none; }
  #back-main { position:fixed; bottom:1rem; left:1rem; padding:0.5rem 1rem; cursor:pointer; }
  #pay-eth, #pay-sol { margin-right:0.5rem; }
</style>
<!-- ETH WalletConnect -->
<script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/web3@1.9.2/dist/web3.min.js"></script>
<!-- Solana Wallet Adapter -->
<script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.js"></script>
<script src="https://unpkg.com/@solana/wallet-adapter-base@latest/lib/index.iife.js"></script>
<script src="https://unpkg.com/@solana/wallet-adapter-wallets@latest/lib/index.iife.js"></script>
<script src="https://unpkg.com/@solana/wallet-adapter-phantom@latest/lib/index.iife.js"></script>
</head>
<body>
<header id="reload-header">clone</header>
<button id="dark-toggle">Toggle Darkmode</button>
<div id="main"></div>

<script>
  // Persist Darkmode
  let dark = localStorage.getItem('dark')==='true';
  if(dark) document.body.classList.add('dark');
  document.getElementById('dark-toggle').addEventListener('click',()=>{
    document.body.classList.toggle('dark');
    dark = document.body.classList.contains('dark');
    localStorage.setItem('dark',dark);
  });

  // Reload page
  document.getElementById('reload-header').addEventListener('click', ()=> location.reload());

  const totalPages = 5;
  const gamesPerPage = 12;
  let currentPage = 1;

  function walletAddress(){
    return { eth: "ETH_ADDRESS_HERE", sol: "SOL_ADDRESS_HERE" };
  }

  async function payETH(amount){
    const provider = new WalletConnectProvider.default({ rpc: { 1: "https://mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID" } });
    await provider.enable();
    const web3 = new Web3(provider);
    const accounts = await web3.eth.getAccounts();
    const tx = await web3.eth.sendTransaction({
      from: accounts[0],
      to: walletAddress().eth,
      value: web3.utils.toWei(amount.toString(), 'ether')
    });
    alert('ETH Payment successful! TX: ' + tx.transactionHash);
    await provider.disconnect();
  }

  async function paySOL(amount){
    // Phantom wallet
    const solanaProvider = window.solana;
    if(!solanaProvider || !solanaProvider.isPhantom){
      alert("Phantom wallet not found!");
      return;
    }
    await solanaProvider.connect();
    const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl('mainnet-beta'));
    const fromPubkey = solanaProvider.publicKey;
    const transaction = new solanaWeb3.Transaction().add(
      solanaWeb3.SystemProgram.transfer({
        fromPubkey,
        toPubkey: new solanaWeb3.PublicKey(walletAddress().sol),
        lamports: amount * 1000000000 // 1 SOL = 1e9 lamports
      })
    );
    const { signature } = await solanaProvider.signAndSendTransaction(transaction);
    await connection.confirmTransaction(signature);
    alert('SOL Payment successful! Signature: ' + signature);
  }

  function renderMain(){
    const main = document.getElementById('main');
    main.innerHTML = '';

    const grid = document.createElement('div');
    grid.className='games-grid';
    for(let i=1;i<=gamesPerPage;i++){
      const btn=document.createElement('button');
      btn.textContent=`Game ${(currentPage-1)*gamesPerPage + i}`;
      btn.addEventListener('click',()=>loadGame(i));
      grid.appendChild(btn);
    }
    main.appendChild(grid);

    const nav = document.createElement('div');
    nav.id='nav-buttons';
    const backBtn=document.createElement('button');
    backBtn.textContent='Back';
    backBtn.disabled=currentPage===1;
    backBtn.addEventListener('click',()=>{currentPage--; renderMain();});
    const nextBtn=document.createElement('button');
    nextBtn.textContent='Next';
    nextBtn.disabled=currentPage===totalPages;
    nextBtn.addEventListener('click',()=>{currentPage++; renderMain();});
    nav.appendChild(backBtn);
    nav.appendChild(nextBtn);
    main.appendChild(nav);
  }

  function loadGame(gameNumber){
    const main = document.getElementById('main');
    main.innerHTML='';

    const gameDiv=document.createElement('div');
    gameDiv.innerHTML=`
      <h2>Game ${(currentPage-1)*gamesPerPage + gameNumber}</h2>
      <p>Game content placeholder for payment integration...</p>
      <button id="back-main">â¬… Back</button>
      <button id="pay-eth">Pay 0.000001 ETH (unlock Level 8)</button>
      <button id="pay-sol">Pay 0.50 SOL (6 lives)</button>
    `;
    main.appendChild(gameDiv);

    document.getElementById('back-main').addEventListener('click', renderMain);

    document.getElementById('pay-eth').addEventListener('click',()=> payETH(0.000001));
    document.getElementById('pay-sol').addEventListener('click',()=> paySOL(0.5));
  }

  renderMain();
</script>
</body>
</html>
