<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>OrangeWeb - AgentBird</title>
<style>
  body { background:#222; color:#fff; font-family:sans-serif; margin:0; padding:0; text-align:center; }
  h1 { margin:20px 0; }
  #gameContainer { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin-bottom:20px; }
  .gameButton { padding:15px 25px; font-size:16px; border:none; border-radius:5px; cursor:pointer; background:orange; color:#000; }
  #agentBirdWrapper { display:none; position:relative; margin:auto; width:800px; height:500px; border:2px solid #333; border-radius:10px; }
  #agentBirdCanvas { width:100%; height:100%; }
  #scoreDisplay { position:absolute; top:10px; left:10px; font-size:20px; color:white; }
  #backBtn { position:absolute; top:10px; right:10px; padding:10px 20px; font-size:16px; border:none; border-radius:5px; background:red; color:white; cursor:pointer; }
</style>
</head>
<body>
<h1>OrangeWeb</h1>
<div class="gameButton" onclick="openGame1()">Game 1 - AgentBird (Fly & Shoot)</div>

<div id="agentBirdWrapper">
    <canvas id="agentBirdCanvas" width="800" height="500"></canvas>
    <div id="scoreDisplay">Score: 0</div>
    <button id="backBtn" onclick="backToMain()">Back</button>
</div>

<script>
const wrapper = document.getElementById('agentBirdWrapper');
const canvas = document.getElementById('agentBirdCanvas');
const ctx = canvas.getContext('2d');
const scoreDisplay = document.getElementById('scoreDisplay');
let player, bullets, enemies, score, shootCooldown, gameActive, gameLoopId;

// --- Touch/Maus Steuerung ---
canvas.addEventListener('mousemove', e => { if(player && gameActive) player.y = e.clientY - canvas.getBoundingClientRect().top - player.height/2; });
canvas.addEventListener('touchmove', e => { if(player && gameActive) { player.y = e.touches[0].clientY - canvas.getBoundingClientRect().top - player.height/2; e.preventDefault(); }});
canvas.addEventListener('click', ()=>{ if(!gameActive) return; if(shootCooldown<=0){ bullets.push({x:player.x+player.width, y:player.y+player.height/2, width:10, height:4, speed:8}); shootCooldown=20; }});

function openGame1(){
    wrapper.style.display='block';
    startAgentBird();
}

function backToMain(){
    wrapper.style.display='none';
    gameActive=false;
    cancelAnimationFrame(gameLoopId);
}

// --- Game Start ---
function startAgentBird(){
    player = {x:100, y:250, width:40, height:30, color:'orange'};
    bullets = [];
    enemies = [];
    score = 0;
    shootCooldown = 0;
    gameActive = true;

    function spawnEnemies(){
        if(Math.random()<0.02){ enemies.push({x:800, y:Math.random()*450, width:50, height:40, color:'gray', speed:2+Math.random()*2}); }
    }

    function update(){
        if(!gameActive) return;
        if(player.y<0) player.y=0;
        if(player.y+player.height>canvas.height-50) player.y=canvas.height-50-player.height;

        // Spawn
        spawnEnemies();

        // Update bullets
        bullets.forEach((b,i)=>{
            b.x += b.speed;
            if(b.x>canvas.width) bullets.splice(i,1);
            enemies.forEach((e,j)=>{ if(b.x<b.x+b.width && b.x+b.width>e.x && b.y<e.y+e.height && b.y+b.height>e.y){ bullets.splice(i,1); enemies.splice(j,1); } });
        });

        // Update enemies
        enemies.forEach((e,i)=>{ e.x -= e.speed; if(e.x+e.width<0) enemies.splice(i,1); });

        if(shootCooldown>0) shootCooldown--;

        score += 0.1;
    }

    function draw(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle='#87CEEB'; ctx.fillRect(0,0,canvas.width,canvas.height); // Himmel
        ctx.fillStyle='#2e8b57'; ctx.fillRect(0,canvas.height-50,canvas.width,50); // Boden
        ctx.fillStyle=player.color; ctx.fillRect(player.x,player.y,player.width,player.height);
        bullets.forEach(b=>{ ctx.fillStyle='yellow'; ctx.fillRect(b.x,b.y,b.width,b.height); });
        enemies.forEach(e=>{ ctx.fillStyle=e.color; ctx.fillRect(e.x,e.y,e.width,e.height); });
        scoreDisplay.innerText = `Score: ${Math.floor(score)}`;
    }

    function loop(){ update(); draw(); if(gameActive) gameLoopId=requestAnimationFrame(loop); }
    loop();
}
</script>
</body>
</html>
